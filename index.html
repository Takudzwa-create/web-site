<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>My Person ‚Äî Dark Mobile</title>
  <meta name="color-scheme" content="dark">
  <style>
    :root{
      --bg-900:#0b0d10;
      --bg-800:#0f1317;
      --card:#0f1720;
      --text:#e6eef8;
      --muted:#9fb0c8;
      --accent:#2b6fb6; /* deep blue chosen */
      --accent-2:#4b88d1;
      --glass: rgba(255,255,255,0.03);
      --shadow: 0 8px 30px rgba(2,6,23,0.7);
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:linear-gradient(180deg,var(--bg-900),var(--bg-800)); color:var(--text); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
    header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;background:transparent;backdrop-filter: blur(6px);position:sticky;top:0;z-index:40}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;font-weight:800;color:white}
    h1{font-size:1rem;margin:0}
    .subtitle{font-size:0.78rem;color:var(--muted)}
    .hamburger{width:44px;height:44px;border-radius:10px;background:var(--glass);display:flex;align-items:center;justify-content:center;border:1px solid rgba(255,255,255,0.03);cursor:pointer}
    nav.mobileNav{position:fixed;left:0;right:0;bottom:0;padding:12px;display:flex;gap:8px;justify-content:space-around;background:linear-gradient(180deg, rgba(10,12,15,0.6), rgba(8,10,12,0.85));backdrop-filter: blur(8px);border-top:1px solid rgba(255,255,255,0.03)}
    main{max-width:980px;margin:12px auto;padding:0 12px 80px;}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:14px;border-radius:var(--radius);box-shadow:var(--shadow);margin-bottom:12px;border:1px solid rgba(255,255,255,0.03)}
    h2{color:var(--accent);margin:0;font-size:1.06rem;display:flex;align-items:center;gap:10px}
    .summary{color:var(--muted);font-size:0.88rem;margin-top:6px}
    .content{max-height:0;opacity:0;overflow:hidden;transition:all .42s cubic-bezier(.2,.9,.2,1);transform:translateY(8px)}
    .open .content{max-height:1200px;opacity:1;transform:none;margin-top:8px}
    blockquote{margin:8px 0;padding-left:10px;border-left:3px solid var(--accent);color:var(--muted);font-style:italic}
    ul{margin:6px 0 10px 18px;color:var(--text);line-height:1.5}
    button, .btn{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;border:none;padding:10px 14px;border-radius:12px;font-weight:700;cursor:pointer;box-shadow:0 6px 18px rgba(43,111,182,0.18)}
    .small{font-size:0.86rem;color:var(--muted)}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:space-between}
    .trackerHeader{display:flex;justify-content:space-between;align-items:center;gap:10px}
    .bar{height:12px;background:rgba(255,255,255,0.04);border-radius:999px;width:160px;overflow:hidden}
    .bar-inner{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent-2));border-radius:999px;transition:width .36s ease}
    .habit-list{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px}
    .habit{display:flex;align-items:center;gap:10px;padding:8px;border-radius:10px;border:1px solid rgba(255,255,255,0.02);background:rgba(255,255,255,0.01)}
    input[type="checkbox"]{width:20px;height:20px;accent-color:var(--accent)}
    .controls{display:flex;gap:8px;align-items:center}
    .topActions{display:flex;gap:8px;align-items:center}
    .exportArea{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    footer{position:fixed;left:0;right:0;bottom:0;padding:0;background:transparent}
    /* responsive/touch */
    @media(min-width:720px){
      header{padding:18px 24px}
      .logo{width:56px;height:56px}
      h1{font-size:1.25rem}
      main{margin-top:18px;padding:0 18px 120px}
      nav.mobileNav{display:none}
      footer{position:static}
    }
    /* accessibility focus */
    :focus{outline:2px solid rgba(75,136,209,0.2);outline-offset:3px}
    .muted{color:var(--muted)}
    .hidden{display:none}
  </style>
</head>
<body>
  <header>
    <div class="brand" style="gap:10px;">
      <div class="logo">MP</div>
      <div>
        <div style="display:flex;align-items:center;gap:6px;">
          <h1>My Person</h1>
        </div>
        <div class="subtitle">Daily strength ¬∑ mindful habits</div>
      </div>
    </div>
    <div style="display:flex;gap:8px;align-items:center">
      <div class="small muted" id="dateTop"></div>
      <div class="hamburger" id="menuBtn" aria-label="Open menu" role="button" tabindex="0">
        <svg width="18" height="14" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M4 6h16M4 12h16M4 18h16" stroke="rgba(255,255,255,0.9)" stroke-width="1.6" stroke-linecap="round"/></svg>
      </div>
    </div>
  </header>

  <main>
    <!-- Mindset -->
    <section id="mindset" class="card toggle">
      <h2>üß† Mindset ‚Äî The Foundation</h2>
      <div class="summary small">Discipline, ownership, purpose, daily learning.</div>
      <div class="content">
        <blockquote>‚ÄúA man is only as strong as his discipline.‚Äù</blockquote>
        <ul>
          <li><b>Rituals over motivation</b> ‚Äî make choices predictable.</li>
          <li><b>Own your results</b> ‚Äî control your responses.</li>
          <li><b>Learn consistently</b> ‚Äî read, reflect, apply.</li>
        </ul>
        <div class="row">
          <button onclick="playClick();prompt('Journal: 3 things you are grateful for today:')">Journal</button>
          <div class="small muted">Tip: 2‚Äì5 minutes each morning.</div>
        </div>
      </div>
    </section>

    <!-- Hygiene -->
    <section id="hygiene" class="card toggle">
      <h2>üßç Hygiene ‚Äî Respect in Appearance</h2>
      <div class="summary small">Daily care, grooming, neat style.</div>
      <div class="content">
        <blockquote>‚ÄúHow you present yourself reflects how you respect yourself.‚Äù</blockquote>
        <ul>
          <li>Shower, skincare, fresh clothes.</li>
          <li>Signature subtle scent & neat grooming.</li>
        </ul>
        <div class="row">
          <button onclick="playClick();alert('Set a 30-minute grooming window this weekend.')">Set Reminder</button>
          <div class="small muted">Small consistency = big impressions.</div>
        </div>
      </div>
    </section>

    <!-- Heart -->
    <section id="heart" class="card toggle">
      <h2>‚ù§Ô∏è The Heart ‚Äî Emotional Strength</h2>
      <div class="summary small">Courage, empathy, dependable bonds.</div>
      <div class="content">
        <blockquote>‚ÄúTrue strength is the courage to feel deeply and still stand tall.‚Äù</blockquote>
        <ul>
          <li>Speak clearly. Listen deeply.</li>
          <li>Keep friends who challenge and support you.</li>
          <li>Practice forgiveness to move forward.</li>
        </ul>
        <div class="row">
          <button onclick="playClick();alert('Reach out to a friend: send a short message.')">Reconnect</button>
          <div class="small muted">Vulnerability builds trust.</div>
        </div>
      </div>
    </section>

    <!-- Diet -->
    <section id="diet" class="card toggle">
      <h2>ü•ó Diet ‚Äî Fuel for Energy</h2>
      <div class="summary small">Whole foods, hydration, steady energy.</div>
      <div class="content">
        <blockquote>‚ÄúEat to perform, not to escape.‚Äù</blockquote>
        <ul>
          <li>Focus on whole foods and protein.</li>
          <li>Hydrate: 2‚Äì3L target (adjust by activity).</li>
        </ul>
        <div class="row">
          <button onclick="playClick();alert('Drink a full glass of water now üíß')">Hydration</button>
          <div class="small muted">Avoid late-night heavy meals.</div>
        </div>
      </div>
    </section>

    <!-- Habits -->
    <section id="habits" class="card toggle">
      <h2>‚öôÔ∏è Habits ‚Äî Daily Growth</h2>
      <div class="summary small">Wake early, move daily, silence & reading.</div>
      <div class="content">
        <blockquote>‚ÄúWe become what we repeatedly do.‚Äù</blockquote>
        <ul>
          <li>Morning routine with 3 non-negotiables.</li>
          <li>Move daily ‚Äî even brisk walks count.</li>
        </ul>
        <div class="row">
          <button onclick="playClick();alert('Plan 3 morning steps for tomorrow.')">Plan</button>
          <div class="small muted">Tiny wins stack over months.</div>
        </div>
      </div>
    </section>

    <!-- Tracker -->
    <section id="tracker" class="card">
      <h2>üìä Daily Progress Tracker</h2>
      <div class="summary small">Log quick wins ‚Äî saved locally on this device.</div>

      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px;">
        <div class="trackerHeader">
          <div class="bar" aria-hidden>
            <div class="bar-inner" id="progressBar"></div>
          </div>
          <div class="small" id="percentLabel">0%</div>
        </div>

        <div class="topActions" style="gap:6px;align-items:center">
          <button id="prevDayBtn" title="Previous day" aria-label="Previous day">‚óÄ</button>
          <div class="small" id="dateLabel"></div>
          <button id="nextDayBtn" title="Next day" aria-label="Next day">‚ñ∂</button>
        </div>
      </div>

      <div class="card" style="margin-top:10px;padding:10px;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
          <div class="muted">Select tasks you completed</div>
          <div class="controls">
            <button id="saveBtn">Save</button>
            <button id="clearBtn" style="background:#e05b4d">Clear</button>
          </div>
        </div>

        <div class="habit-list" id="habitList">
          <!-- populated by JS -->
        </div>

        <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px;">
          <div class="exportArea">
            <button id="exportBtn" style="background:linear-gradient(90deg,#2b6fb6,#4b88d1)">Export</button>
            <button id="importBtn" style="background:linear-gradient(90deg,#4b88d1,#6daae9)">Import</button>
            <input type="file" id="importFile" accept="application/json" style="display:none" />
            <div class="muted" style="font-size:0.82rem">Back up your progress as JSON.</div>
          </div>

          <div class="small muted credits">LocalStorage only ‚Äî this device & browser.</div>
        </div>
      </div>
    </section>

  </main>

  <nav class="mobileNav" aria-hidden="false">
    <a href="#mindset" style="color:var(--text);text-decoration:none;font-weight:700">Mindset</a>
    <a href="#hygiene" style="color:var(--text);text-decoration:none;font-weight:700">Hygiene</a>
    <a href="#heart" style="color:var(--text);text-decoration:none;font-weight:700">Heart</a>
    <a href="#diet" style="color:var(--text);text-decoration:none;font-weight:700">Diet</a>
    <a href="#habits" style="color:var(--text);text-decoration:none;font-weight:700">Habits</a>
    <a href="#tracker" style="color:var(--text);text-decoration:none;font-weight:700">Tracker</a>
  </nav>

  <footer id="siteFooter" class="hidden"></footer>

  <script>
    // --- small click sound ---
    function playClick() {
      try {
        const C = window.AudioContext || window.webkitAudioContext;
        const ctx = new C();
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type = 'triangle';
        o.frequency.value = 650;
        g.gain.value = 0.02;
        o.connect(g);
        g.connect(ctx.destination);
        o.start();
        setTimeout(()=>{ o.stop(); ctx.close(); }, 65);
      } catch(e) { /* no-op */ }
    }

    // Menu quick open scroll
    document.getElementById('menuBtn').addEventListener('click', ()=>{
      playClick();
      window.scrollTo({top: document.querySelector('main').offsetTop - 8, behavior:'smooth'});
    });

    // show current date top
    function friendlyDate(d){
      return d.toLocaleDateString(undefined,{weekday:'short', month:'short', day:'numeric'});
    }
    const dateTop = document.getElementById('dateTop');
    dateTop.textContent = friendlyDate(new Date());

    // toggles
    document.querySelectorAll('.toggle h2').forEach(h=>{
      h.addEventListener('click', ()=>{
        h.parentElement.classList.toggle('open');
        playClick();
      });
    });

    // Tracker logic (same structure as before)
    const HABITS = [
      {id:'journal', label:'Journal (3 lines)'},
      {id:'exercise', label:'Exercise / Move 20+ min'},
      {id:'hydrate', label:'Hydrate (regular)'},
      {id:'read', label:'Read 20 minutes'},
      {id:'groom', label:'Groom/dress well'},
      {id:'no_screen', label:'No mindless scrolling (2 hrs)'},
      {id:'protein', label:'Protein with each meal'},
      {id:'silence', label:'30 min silence / meditate'}
    ];

    const habitListEl = document.getElementById('habitList');
    const progressBar = document.getElementById('progressBar');
    const percentLabel = document.getElementById('percentLabel');
    const dateLabel = document.getElementById('dateLabel');

    function ymd(d){ return d.toISOString().slice(0,10); }
    let currentDate = new Date();

    function renderHabits(state){
      habitListEl.innerHTML = '';
      HABITS.forEach(h=>{
        const el = document.createElement('label');
        el.className = 'habit';
        el.innerHTML = `<input type="checkbox" data-id="${h.id}" ${state && state[h.id] ? 'checked' : ''}/><div style="font-weight:700">${h.label}</div>`;
        habitListEl.appendChild(el);
      });
      habitListEl.querySelectorAll('input[type="checkbox"]').forEach(ch=>{
        ch.addEventListener('change', ()=>{ playClick(); updateProgressVisual(); });
      });
      updateProgressVisual();
    }

    const STORAGE_PREFIX = 'myperson.progress.';
    function storageKeyFor(date){ return STORAGE_PREFIX + date; }
    function loadStateFor(date){
      const raw = localStorage.getItem(storageKeyFor(date));
      if(!raw) return null;
      try { return JSON.parse(raw); } catch(e) { return null; }
    }
    function saveStateFor(date, state){ localStorage.setItem(storageKeyFor(date), JSON.stringify(state)); }
    function clearStateFor(date){ localStorage.removeItem(storageKeyFor(date)); }

    function getCurrentUIState(){
      const inputs = habitListEl.querySelectorAll('input[type="checkbox"]');
      const obj = {};
      inputs.forEach(i=> obj[i.dataset.id] = i.checked);
      return obj;
    }
    function updateProgressVisual(){
      const state = getCurrentUIState();
      const total = HABITS.length;
      const done = Object.values(state).filter(Boolean).length;
      const pct = Math.round((done/total)*100);
      progressBar.style.width = pct + '%';
      percentLabel.textContent = pct + '%';
    }

    document.getElementById('saveBtn').addEventListener('click', ()=>{
      playClick();
      saveStateFor(ymd(currentDate), getCurrentUIState());
      alert('Saved for ' + ymd(currentDate));
    });
    document.getElementById('clearBtn').addEventListener('click', ()=>{
      if(!confirm('Clear saved progress for ' + ymd(currentDate) + '?')) return;
      playClick();
      clearStateFor(ymd(currentDate));
      renderHabits({});
    });

    document.getElementById('prevDayBtn').addEventListener('click', ()=>{ changeDay(-1); });
    document.getElementById('nextDayBtn').addEventListener('click', ()=>{ changeDay(1); });

    function changeDay(offset){
      currentDate.setDate(currentDate.getDate() + offset);
      loadForCurrentDate();
      playClick();
    }

    function loadForCurrentDate(){
      dateLabel.textContent = currentDate.toDateString();
      const st = loadStateFor(ymd(currentDate));
      renderHabits(st || {});
    }

    // export/import
    document.getElementById('exportBtn').addEventListener('click', ()=>{
      playClick();
      const out = {};
      for(let i=0;i<localStorage.length;i++){
        const k = localStorage.key(i);
        if(k && k.startsWith(STORAGE_PREFIX)){
          out[k.replace(STORAGE_PREFIX,'')] = JSON.parse(localStorage.getItem(k));
        }
      }
      const blob = new Blob([JSON.stringify(out,null,2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'myperson_progress.json';
      document.body.appendChild(a); a.click(); a.remove();
      URL.revokeObjectURL(url);
    });
    document.getElementById('importBtn').addEventListener('click', ()=> document.getElementById('importFile').click());
    document.getElementById('importFile').addEventListener('change', (e)=>{
      const f = e.target.files[0]; if(!f) return;
      const reader = new FileReader();
      reader.onload = ()=> {
        try {
          const obj = JSON.parse(reader.result);
          Object.keys(obj).forEach(day=> saveStateFor(day, obj[day]));
          alert('Imported ' + Object.keys(obj).length + ' days.');
          loadForCurrentDate();
        } catch(err){ alert('Import failed: invalid file.'); }
      };
      reader.readAsText(f);
    });

    // init
    loadForCurrentDate();
    // open first card by default
    setTimeout(()=>{ document.querySelector('.toggle')?.classList?.add('open'); }, 280);

    // micro interactions
    document.querySelectorAll('button').forEach(b=>{
      b.addEventListener('touchstart', ()=> b.style.transform='translateY(1px)')
      b.addEventListener('touchend', ()=> b.style.transform='translateY(0px)')
      b.addEventListener('mousedown', ()=> b.style.transform='translateY(1px)')
      b.addEventListener('mouseup', ()=> b.style.transform='translateY(0px)')
    });

    // smooth hash navigation for mobile nav
    document.querySelectorAll('.mobileNav a').forEach(a=>{
      a.addEventListener('click', (e)=>{
        playClick();
        document.querySelectorAll('.card.open').forEach(c=>c.classList.remove('open'));
        // small delay to let click sound play then scroll
        setTimeout(()=> {
          const target = document.querySelector(a.getAttribute('href'));
          if(target) target.scrollIntoView({behavior:'smooth', block:'start'});
        }, 80);
      });
    });
  </script>
</body>
</html>
